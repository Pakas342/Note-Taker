{% from "bootstrap5/form.html" import render_form %} {% extends "template.html" %}

{% block title %}Home{% endblock title %}

{% block content %}
<h1>To-do List Project</h1>
<!-- Tab container -->

<div class="d-flex align-items-start m-5">
  <!-- Tab Links -->
  <div class="nav flex-column nav-pills me-5" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    <h3>Project Categories</h3>
    {% for category in all_categories %}
    <button class="nav-link" id="v-pills-{{category.name}}-tab" data-bs-toggle="pill" data-bs-target="#v-pills-{{category.name}}" type="button" role="tab" aria-controls="v-pills-{{category.name}}" aria-selected="false">{{category.name}}</button>
    {% endfor %}
    <button class="nav-link" id="v-pills-new-category-tab" data-bs-toggle="pill" data-bs-target="#v-pills-new-category" type="button" role="tab" aria-controls="v-pills-new-category" aria-selected="false">Add New Category</button>
  </div>
  <!-- Tab Content -->
  <div class="tab-content" id="v-pills-tabContent">
    <h4>Projects</h4>
    {% for category in all_categories %}
    <div class="tab-pane fade" id="v-pills-{{category.name}}" role="tabpanel" aria-labelledby="v-pills-{{category.name}}-tab">
      {% for project in all_categories.projects %}
      <h5>{{project.name}} ({{project.due_date}})</h5>
      <ul> 
        {% for task in project.tasks %}
        <li>
          {{task.name}} ({{task.due_date}})
        </li>
        {% endfor %}
        <li>Add new task to {{project.name}}</li>
        {{ render_form(task_form, button_map={"submit": "primary"}) }}
      </ul>
      {% endfor %}
      <h5>Add new Project</h5>
      {{ render_form(project_form, button_map={"submit": "primary"}) }}

    </div>
    {% endfor %}
    <div class="tab-pane fade" id="v-pills-new-category role="tabpanel" aria-labelledby="v-pills-new-category-tab">{{ render_form(category_form, button_map={"submit": "primary"}) }}</div>
  </div>
</div>

<script src="../static/js/tab_handler.js"></script>
{% endblock content %}